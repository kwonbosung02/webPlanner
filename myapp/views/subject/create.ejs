<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <title>Material Design for Bootstrap</title>
    <!-- MDB icon -->
    <link rel="icon" href="img/mdb-favicon.ico" type="image/x-icon" />
    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.8.2/css/all.css"
    />
    <!-- Google Fonts -->
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
    />
    <!-- Bootstrap core CSS -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Material Design Bootstrap -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.0/css/mdb.min.css"
      rel="stylesheet"
    />
  </head>
 

  <body>
    <!--Main Navigation-->

    <!--Main Navigation-->
    <!-- Start your project here-->
    <form id="createForm">
      <div style="height: 100vh;">
        <div style="margin-top: 3vh;"></div>
        <!-- Card -->
        <%= user.email %>
        <div class="md-form" style="margin-left: 20vh; margin-right: 20vh;">
          <input type="text" id="title" class="form-control" required />
          <label for="과목명">과목명</label>
        </div>

        <div class="md-form" style="margin-left: 20vh; margin-right: 20vh;">
          <input type="text" id="studytime" class="form-control" required />
          <label for="공부할 시간">공부할 시간</label>
        </div>

        <div class="md-form" style="margin-left: 20vh; margin-right: 20vh;">
          <input type="text" id="note" class="form-control" required />
          <label for="공부할 내용">공부할 내용</label>
        </div>
          <button type="submit" class="btn btn-yellow">
            Save
          </button>
        </div>
      </div>
    </form>
    <!-- End your project here-->
    <!-- JQuery -->
    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"
    ></script>
    <!-- Bootstrap tooltips -->
    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.4/umd/popper.min.js"
    ></script>
    <!-- Bootstrap core JavaScript -->
    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/js/bootstrap.min.js"
    ></script>
    <!-- MDB core JavaScript -->
    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.0/js/mdb.min.js"
    ></script>
    <script>
      $(function () {
        $("#createForm").submit((event) => {
          event.preventDefault();
          const title = $("#title").val();
          const studytime = $("#studytime").val();
          const note = $("#note").val();
          const name = "<%= user.email%>";

          console.log(title, studytime,note,name);
          
          $.ajax({
            url: "/api/subject",
            type: "post",
            data: { title, studytime, note, name},
          })
            .done(() => {
              location.href = "/api/user/mypage";
            })
            .fail((requst, status, error) => {
              alert(requst.responseText);
            });
        });
      });
    </script>
    
  </body>
</html>
